<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>오늘의 해냄</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app-container">
    <!-- 공통 헤더 -->
    <header class="app-header">
      <h1 class="app-title">오늘의 해냄</h1>
      <p class="app-subtitle">오늘도 한 걸음, 해낸 나를 기록하기</p>
    </header>

    <!-- 메인 화면 -->
    <main id="view-main" class="view active-view">
      <section class="card random-message-card">
        <h2 class="section-title">오늘의 메시지</h2>
        <p id="random-category-label" class="random-category">불러오는 중...</p>
        <p id="random-message-text" class="random-message">
          Google 스프레드시트에서 문구를 불러오는 중입니다.
        </p>
        <p id="random-message-author" class="random-message-author"></p>
      </section>

      <!-- 필사/인증 안내 문구 -->
      <p class="certify-guide-text">
        건강 미션은 실천 장면을,<br />
        응원·명언은 <strong>종이에 필사한 문구를 촬영</strong>해 인증해 주세요 ✍️📷
      </p>

      <section class="button-group">
        <button id="btn-go-certify" class="primary-btn">인증하러가기</button>
        <button id="btn-go-list" class="secondary-btn">오늘의 인증자 목록</button>
      </section>
    </main>

    <!-- 인증 화면 -->
    <main id="view-certify" class="view">
      <section class="card">
        <h2 class="section-title">오늘의 해냄 인증</h2>

        <!-- 카메라 영역 -->
        <div class="camera-wrapper">
          <div class="camera-box">
            <video id="camera-preview" autoplay playsinline></video>
            <canvas id="captured-canvas"></canvas>
            <div id="camera-overlay-text" class="camera-overlay-text">
              카메라 허용을 눌러주세요 📷
            </div>
          </div>

          <!-- 얼굴 안내 문구 -->
          <p class="face-notice">
            📸 인증 사진에는 <strong>얼굴이 나오지 않도록</strong> 찍어 주세요.<br />
            손, 발, 필사한 노트 등 일부만 보이도록 촬영하면 좋아요.
          </p>

          <div class="camera-button-row">
            <button id="btn-take-photo" class="primary-btn small-btn">
              사진 찍기
            </button>
            <button id="btn-retake-photo" class="secondary-btn small-btn">
              다시 찍기
            </button>
          </div>
          <p class="camera-help">
            * 촬영된 사진은 서버에 업로드되어 오늘의 인증자 목록에 함께 표시됩니다.
          </p>
          <p id="camera-error" class="error-text"></p>
        </div>

        <!-- 입력 폼 -->
        <form id="certify-form" class="form">
          <div class="form-group">
            <label for="nickname">닉네임</label>
            <input
              type="text"
              id="nickname"
              name="nickname"
              placeholder="예: 뽀니쌤"
              required
            />
          </div>

          <div class="form-group">
            <label for="message">인증 문구</label>
            <input
              type="text"
              id="message"
              name="message"
              placeholder="예: #성공, 오늘 미션 완료!"
              required
            />
          </div>

          <p class="warning-text">
            부적절한 닉네임·인증문구·사진의 경우<br />
            관리자에 의해 삭제될 수 있습니다.
          </p>

          <button type="submit" class="primary-btn full-width-btn">
            오늘 해냄 기록하기
          </button>
        </form>

        <button id="btn-back-from-certify" class="ghost-btn full-width-btn">
          메인으로 돌아가기
        </button>
      </section>
    </main>

    <!-- 인증자 목록 화면 -->
    <main id="view-list" class="view">
      <section class="card">
        <h2 class="section-title">오늘의 인증자 목록</h2>
        <p class="list-description">
          오늘(00:00 ~ 23:59) 동안 기록된 인증 내역만 표시됩니다.
        </p>

        <div class="list-actions">
          <button id="btn-toggle-admin" class="mini-btn">
            관리자 모드 (삭제)
          </button>
          <button id="btn-delete-old-records" class="mini-btn mini-btn-danger">
            이전 기록 전체 삭제
          </button>
        </div>

        <!-- 오늘의 최다 인증자 -->
        <p id="top-user-info" class="top-user-info">
          아직 오늘의 최다 인증자가 없습니다.
        </p>

        <!-- TOP5 순위 박스 -->
        <div id="rankings-container" class="rankings-container"></div>

        <!-- 오늘의 인증 카드 목록 -->
        <div id="records-container" class="records-container"></div>

        <button id="btn-back-from-list" class="ghost-btn full-width-btn">
          메인으로 돌아가기
        </button>
      </section>
    </main>

    <!-- 🎉 인증 성공 토스트(팝업) -->
    <div id="success-toast" class="success-toast">
      🎉 인증 성공!
    </div>

    <!-- 고정 제작자 정보 -->
    <footer class="app-footer">
      <span>만든이: 뽀니쌤</span>
    </footer>
  </div>

  <!-- ES Module 스크립트 -->
  <script type="module" src="script.js"></script>
</body>
</html>
